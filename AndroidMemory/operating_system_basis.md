#操作系统基础

这里不在详细的讲解操作系统,只是介绍关于内存的几个关键名词及相关概念:

- 物理内存
- 虚拟内存
- 逻辑地址
- 交换空间

如果的比较熟悉上述几个关键名词,此章节可以跳过

##物理内存(RAM)：

加载到内存地址寄存器中的内存又叫“硬件内存”，是内存单元真正的地址(也叫物理地址)。RAM作为进程运行不可或缺的资源，对系统和稳定性有着决定性的影响。另外，RAM的一部分被操作系统留作他用，比如显存等。

#逻辑地址:

由CPU控制生成的地址，是一个程序级别的概念。这里引用一个浅显的例子——我们在C语言指针编程中，可以读取指针变量本身的值(&操作)，这里取得的值就是逻辑地址——也就是说，这个(&操作)取得的值是CPU控制生成的一个逻辑地址，并不是这个指针变量在RAM中的真正地址。
  那么，我们为什么要这么一个并不是真正地址的逻辑地址呢？深层次的原因这里不予以探究，但是一个比较浅显的原因就是，逻辑地址的分配非常灵活——在一个数组中，我们通过逻辑地址可以保证数组中元素地址的连续性。当然这个逻辑地址最终还是要通过一定的方式映射到RAM中的物理地址上，这个物理地址才是元素存储的真正地址，而这个物理地址，不一定是连续的。

##虚拟内存：

是操作系统级别的概念，指计算机呈现出要比实际拥有的内存大得多的内存量。它使得每个应用程序都认为自己拥有独立且连续的可用的内存空间（一段连续完整的地址空间），这个内存大小跟操作系统的位数有关。比如32位系统，逻辑内存的最大为2^23。而实际上，它通常是被映射到多个物理内存段（在真正的物理地址上不一定是连续的），还有部分暂时存储在外部磁盘存储器上，在需要时再加载到内存中来。
  上一段我们我们说了半天的逻辑地址，理解就是虚拟内存中的地址。OK，现在我们知道了虚拟内存有两个特点——一个是在虚拟内存中虚拟地址/逻辑地址是连续的，便于灵活分配；二是虚拟内存可以是计算机呈现出比实际内存大的多的内存。那么为什么虚拟内存会呈现出这么大的内存的神奇功能呢？或者说这多出来的额内存是哪来的？这就要用到我们接下来讲的交换(Swap)空间。

#交换(Swap)空间：

在系统中运行的每个进程都需要使用到内存，但不是每个进程都需要每时每刻使用系统分配的内存空间。当系统运行所需内存超过实际的物理内存，内核会释放某些进程所占用但未使用的部分或所有物理内存，将这部分释放的数据存储在磁盘上直到进程下一次调用，并将释放出的内存提供给有需要的进程使用。
  引用一个容易理解但不是很恰当的比喻：你不需要很长的轨道就可以让一列火车从上海开到北京。你只需要足够长的铁轨（比如说3公里）就可以完成这个任务。采取的方法是把后面的铁轨立刻铺到火车的前面，只要你的操作足够快并能满足要求，列车就能象在一条完整的轨道上运行。
  swap和虚拟内存结伴而来的。如果系统是64位，最大虚拟内存可以是2的64次方，没有计算机会有这么大的内存。当内存不够用的时候只能映射到磁盘。linux专门开辟了一个swap磁盘分区，当物理内存不够用的时候(程序并不知道)，将内存中很久不使用的内存区域交换到swap区。也即是说：用作虚拟内存的磁盘空间称为交换空间（swap空间）。
