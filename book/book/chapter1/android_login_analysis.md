#app 登陆浅析

1. 登陆方式

---

(1). 登陆方式

一般有以下几种登录方式


手机验证码登录，如下面的*漫品Android客户端* 手机验证码登录

![](/assets/apploginAnalysis/loginUser.png)

传统的账号密码登录，如下面的 *漫品Android客户端* 账号/密码登录，账号可以是邮箱，手机号或者账户名

![](/assets/apploginAnalysis/loginPhone.png)

第三方登录 ,如漫品客户端QQ及微博第三方登陆方法

还有一些新型的登录方式，比如图案锁，指纹，语音验证，虹膜扫描等等，这些都是在client进行验证，或者是一种变种的账号密码形式，在这里不作讨论。为表述方便，分别使用 账密，验证码和第三方来表述上面三种登录方式。

（2）登录方式的大概流程

账密：用户在client输入账号密码，发送到server端，server端进行database验证，如果验证通过则该用户认证成功，否则认证失败

验证码：用户输入手机号，并且点击获取验证码，server产生随机验证码并打上过期时间，通过SMS传输给用户，client输入该验证码，传到server进行判断

第三方：第三方相对复杂一点，client需要先到第三方网站或者APP进行授权，授权后跳转到server，server通过code码获取到相应的access_token，然后通过access_token获得这个用户在这个第三方的基本信息。

（3）登录方式的优缺点以及适用场景
账密：安全性相对较高，需要用户输入保护信息。使用场景较广，一般的应用都能够适用。

验证码：优点是便捷，缺点是安全系数相对较低，手机丢失即账号丢失，一般用在验证不是非常严密的应用，比如新闻资讯，地图这种获取咨询的app或者一些即用即关的一些应用，比如滴滴，货拉拉这种app，（注：内部支付有另外的验证）。

第三方：优点同样是便捷，比手机号还要编辑，都不需要输入验证码。安全性需要依托第三方的可信度。不过现在微信，微博等第三方的登录还是相对比较安全的。使用范围相对较广。便捷性方面不定，需要依托第三方的便捷性，比如微信就是需要安装微信的app，而有些第三方登录会跳转到该第三方的登录网站中，使用账号密码登录。所以安全性方面需要看第三方了，像微信这样的直接点击确定登录肯定没有输入第三方账号密码安全。综合来讲第三方登录安全性不差，便捷性较高，另外不用注册新的账号密码，在现在的登录方式中非常普遍。
#2.认证(Authentication)
首先普及两个知识点：

a.认证(Authentication)和授权(Authorization)。借用别人的一个例子，你要登陆论坛，输入用户名张三，密码1234，密码正确，证明你张三确实是张三，这就是 authentication；再一check用户张三是个版主，所以有权限加精删别人帖，这就是 authorization。

b.token：token就是令牌的意思。为什么client中使用token代替cookie/session呢？token去掉了服务器端的状态保持，扩展性更好，不需要在服务器进行存储，只需要验证就好。

（1）账密认证
![](/assets/apploginAnalysis/accountAuthentication.jpg)
Client指的是移动终端，Application指的是应用服务器。
账密的认证很简单，数据库验证下就行。
注意：密码一般都会使用MD5进行hash下

（2）验证码认证
![](/assets/apploginAnalysis/checknumber.jpg)
比账号密码多了步产生验证码的过程，并且匹配一般在缓存数据库（如memcache或者redis）中进行，验证是需要验证过期时间。

（3）第三方认证
>对于说使用友盟和shareSDK的同学，这篇文章不是讲怎么做，而是表述一些我在APP登录方面的一些见解，以及原理剖析。
为了描述清楚，使用微信作为代表（事先需要到各个迪桑放网站注册自己的server Application）

![](/assets/apploginAnalysis/loginShare.png)
client id和client secret
